<!-- Sidebar message -->

<div class="card bg-light mt-4 text-center">
    <div class="card-body">
        <p class="card-text text-dark">
        <a href="https://www.beagleboard.org/" target="_blank">BeagleBoard.org</a> 
        is all about being open, please discuss in public on our 
        <a href="https://forum.beagleboard.org" target="_blank">forum</a>!</p>
    </div>
</div>


<!-- Top version and announcement message -->
<script>

// Function to check for the next div and clear it or create it if not available
function getBannerDiv() {
    // Get the first element with the class 'search-button__wrapper'
    const sbw = document.getElementsByClassName('search-button__wrapper');
    
    // Ensure the collection is not empty to avoid errors
    if (sbw.length > 0) {
        const sbwElement = sbw[0];
        const nextElement = sbwElement.nextElementSibling;
        
        // Check if the next element exists and has the class 'pst-async-banner-revealer'
        if (nextElement && nextElement.classList.contains('pst-async-banner-revealer')) {
            // Clear the content of the next element
            nextElement.innerHTML = '';
        } else {
            // Create a new div with the required class and style if it doesn't exist
            const newDiv = document.createElement('div');
            newDiv.className = 'pst-async-banner-revealer';
            newDiv.style.height = 'auto';
            sbwElement.insertAdjacentElement('afterend', newDiv);
            return newDiv; // Return the newly created div
        }
        return nextElement; // Return the existing element
    } else {
        console.error("No elements with the class 'search-button__wrapper' found.");
        return null;
    }
}

// Function to generate version and announcement banner HTML
function getBannerHTML() {
    return `
        {% if 'docs.beagleboard.org' not in docs_url%}
        <aside id="bd-header-version-warning" class="d-print-none" aria-label="Version warning">
            <div class="bd-header-announcement__content ms-auto me-auto">
                <div class="sidebar-message">
                    {{ current_url }}
                    {% if '/docs.beagleboard.io/' in docs_url %}
                    {{forked_version_message}}
                    {% elif 'docs.beagleboard.io' in docs_url %}
                    {{development_version_message}}
                    {% else %}
                    {{unknown_version_message}}
                    {% endif %}
                    <a class="btn text-wrap font-weight-bold ms-3 my-1 align-baseline pst-button-link-to-stable-version" href="{{version_link}}">
                        {{version_link_text}}
                    </a>
                </div>
            </div>
        </aside>
        {% endif %}
        <aside class="bd-header-announcement" aria-label="Announcement">
            <div class="bd-header-announcement__content">{{ announcement_message }}</div>
        </aside>
    `;
}

// Get the target element where the banners will be added
const bannerDiv = getBannerDiv();

// Add version banner and announcement banner if bannerDiv is valid
if (bannerDiv) {
    bannerDiv.innerHTML = getBannerHTML();
}

</script>
